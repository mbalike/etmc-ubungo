<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ETMC - Ubungo — Church Board</title>
  <meta name="description" content="Meet the ETMC - Ubungo leadership: Pastor, Deacons, Trustees, and Missionaries." />
  <link rel="icon" href="assets/logo.png" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <style>
    :root{
      --brand:#2a4c7f;
      --muted:#c5cce6;
      --bg:#000000;
      --ring:rgba(42,76,127,.35);
      --glass-bg:rgba(255,255,255,.12);
      --glass-brd:rgba(255,255,255,.22);
      --glass-shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:20px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial, sans-serif;
      color:#eef2ff; background:radial-gradient(1200px 600px at 20% -10%, #1a2440 0, transparent 60%), var(--bg);
      line-height:1.6;
    }
    a:focus, button:focus, input:focus, select:focus{
      outline:3px solid var(--ring); outline-offset:2px; border-radius:10px
    }

    /* Glass */
    .glass{
      background:var(--glass-bg);
      -webkit-backdrop-filter:saturate(180%) blur(14px);
      backdrop-filter:saturate(180%) blur(14px);
      border:1px solid var(--glass-brd);
      box-shadow:var(--glass-shadow);
      border-radius:var(--radius);
    }
    .glass-soft{
      background:rgba(255,255,255,.08);
      -webkit-backdrop-filter:saturate(160%) blur(10px);
      backdrop-filter:saturate(160%) blur(10px);
      border:1px solid rgba(255,255,255,.16);
      box-shadow:0 8px 24px rgba(0,0,0,.25);
      border-radius:var(--radius);
    }

    /* Pill Nav */
    .nav-wrap{position:fixed; top:16px; z-index:60; display:flex; justify-content:center; padding:0 16px; width:100%}
    .nav{display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:999px}
    .brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:#eef2ff; font-weight:800; padding:6px 10px; border-radius:999px}
    .brand img{width:28px; height:28px; object-fit:contain}
    .links{display:flex; gap:4px; flex-wrap:wrap}
    .links a{color:#f0f4ff; text-decoration:none; font-weight:700; font-size:.95rem; padding:8px 12px; border-radius:999px; opacity:.95}
    .links a:hover, .links a[aria-current="page"]{background:rgba(255,255,255,.14)}
    .menu-btn{display:none; margin-left:8px; border:0; background:transparent; color:#fff; font-size:1.1rem; padding:8px 10px; border-radius:12px}

    /* Hero (photo) */
    .hero{
      position:relative; min-height:56vh; display:grid; place-items:end center; overflow:hidden; border-bottom:1px solid rgba(255,255,255,.08);
    }
    .hero-bg{
      position:absolute; inset:0;
      background:linear-gradient(to bottom, rgba(7,10,20,.35), rgba(7,10,20,.6)), url('assets/board-hero.jpg') center/cover no-repeat;
      filter:saturate(115%) contrast(105%); z-index:-1;
    }
    .hero-inner{max-width:1200px; width:100%; padding:160px 16px 28px}
    .hero-title{display:flex; align-items:flex-end; justify-content:space-between; gap:14px; flex-wrap:wrap}
    .hero-title h1{margin:0; font-size:clamp(1.9rem, 3.8vw, 3.2rem)}
    .muted{color:var(--muted)}
    .chips{display:flex; gap:8px; flex-wrap:wrap}
    .chip{
      display:inline-flex; align-items:center; gap:6px; padding:8px 12px; border-radius:999px; font-weight:800;
      background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.22)
    }

    /* Container */
    main{max-width:1200px; margin:0 auto; padding:28px 16px 40px}
    .toolbar{display:flex; gap:10px; justify-content:space-between; align-items:center; flex-wrap:wrap; margin-bottom:16px}
    .filters{display:flex; gap:8px; flex-wrap:wrap}
    .pill{
      border:1px solid rgba(255,255,255,.22); background:rgba(255,255,255,.10); color:#fff;
      padding:8px 12px; border-radius:999px; font-weight:800; cursor:pointer
    }
    .pill[aria-pressed="true"]{background:#3b5db1; border-color:#3b5db1}
    .searchbox{display:flex; gap:8px; align-items:center; padding:8px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.22); background:rgba(255,255,255,.08)}
    .searchbox input, .searchbox select{
      background:transparent; border:0; color:#fff; outline:none
    }
    .grid{display:grid; gap:24px}
    .cols-4{grid-template-columns:repeat(4,1fr)}
    .cols-3{grid-template-columns:repeat(3,1fr)}
    .cols-2{grid-template-columns:repeat(2,1fr)}

    /* Cards - Redesigned */
    .card {
      padding: 24px;
      border-radius: var(--radius);
      background: linear-gradient(135deg, rgba(255,255,255,.08) 0%, rgba(42,76,127,.12) 100%);
      box-shadow: 0 4px 20px rgba(0,0,0,.2);
      border: 1px solid rgba(255,255,255,.15);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, transparent, var(--brand), transparent);
      opacity: 0;
      transition: opacity 0.3s;
    }
    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 40px rgba(42,76,127,.3);
      border-color: rgba(255,255,255,.25);
    }
    .card:hover::before {
      opacity: 1;
    }
    .card-inner {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }
    .avatar-wrapper {
      position: relative;
      margin-bottom: 4px;
      width: 100px;
      height: 100px;
      flex-shrink: 0;
    }
    .avatar {
      width: 100px;
      height: 100px;
      min-width: 100px;
      min-height: 100px;
      max-width: 100px;
      max-height: 100px;
      border-radius: 50%;
      object-fit: cover;
      object-position: center;
      aspect-ratio: 1 / 1;
      border: 3px solid rgba(255,255,255,.3);
      background: rgba(255,255,255,.1);
      box-shadow: 0 4px 20px rgba(42,76,127,.25);
      transition: all 0.3s;
      display: block;
    }
    .card:hover .avatar {
      transform: scale(1.05);
      border-color: rgba(255,255,255,.4);
      box-shadow: 0 6px 30px rgba(42,76,127,.35);
    }
    .avatar-fallback {
      width: 100px;
      height: 100px;
      min-width: 100px;
      min-height: 100px;
      max-width: 100px;
      max-height: 100px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      font-weight: 900;
      letter-spacing: .02em;
      background: linear-gradient(140deg, rgba(255,255,255,.2), rgba(42,76,127,.15));
      border: 3px solid rgba(255,255,255,.3);
      color: #eef2ff;
      font-size: 2rem;
      transition: all 0.3s;
      aspect-ratio: 1 / 1;
      flex-shrink: 0;
    }
    .card:hover .avatar-fallback {
      transform: scale(1.05);
      border-color: rgba(255,255,255,.4);
    }
    .card-details {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    .card-details h3 {
      margin: 0;
      font-size: 1.15rem;
      font-weight: 800;
      color: #eef2ff;
      line-height: 1.3;
    }
    .role-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: .85rem;
      padding: 6px 14px;
      border-radius: 999px;
      font-weight: 700;
      letter-spacing: 0.3px;
      text-transform: uppercase;
      margin-top: 4px;
    }
    .role-badge.pastor {
      background: linear-gradient(135deg, rgba(255,215,0,.25), rgba(255,193,7,.15));
      border: 1px solid rgba(255,215,0,.4);
      color: #ffd700;
    }
    .role-badge.deacon-head {
      background: linear-gradient(135deg, rgba(42,76,127,.35), rgba(42,76,127,.2));
      border: 1px solid rgba(42,76,127,.5);
      color: #8db4ff;
    }
    .role-badge.deacon-secretary {
      background: linear-gradient(135deg, rgba(138,43,226,.3), rgba(138,43,226,.15));
      border: 1px solid rgba(138,43,226,.4);
      color: #c19fff;
    }
    .role-badge.deacon {
      background: linear-gradient(135deg, rgba(42,76,127,.3), rgba(42,76,127,.15));
      border: 1px solid rgba(42,76,127,.4);
      color: #a8c5ff;
    }
    .role-badge.trustee {
      background: linear-gradient(135deg, rgba(34,139,34,.3), rgba(34,139,34,.15));
      border: 1px solid rgba(34,139,34,.4);
      color: #7dd87d;
    }
    .role-badge.missionary {
      background: linear-gradient(135deg, rgba(255,69,0,.3), rgba(255,69,0,.15));
      border: 1px solid rgba(255,69,0,.4);
      color: #ff9d6b;
    }
    .area {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.2);
      background: rgba(255,255,255,.06);
      color: #d0d9f0;
      font-size: .88rem;
      font-weight: 600;
      margin-top: 4px;
    }
    .card-note {
      margin-top: 8px;
      padding: 8px 12px;
      background: rgba(255,255,255,.05);
      border-radius: 8px;
      font-size: .85rem;
      color: #c5cce6;
      border: 1px solid rgba(255,255,255,.1);
    }
    .section-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin: 32px 0 20px;
      padding-bottom: 12px;
      border-bottom: 2px solid rgba(255,255,255,.1);
    }
    .section-head h2 {
      margin: 0;
      font-size: 1.6rem;
      font-weight: 800;
      background: linear-gradient(135deg, #eef2ff, #a8c5ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .hint {
      font-size: .9rem;
      color: var(--muted);
    }

    /* Footer */
    footer {
      margin-top:40px;
      background:rgba(255,255,255,.06);
      border-top:1px solid rgba(255,255,255,.12);
    }
    footer .wrap {
      max-width:1200px;
      margin:auto;
      padding:48px 32px;
      display:grid;
      gap:0;
      grid-template-columns:1fr 1fr 1fr;
      justify-items:center;
      align-items:center;
      text-align:center;
      column-gap:48px;
    }
    footer .wrap > div {
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding:0 24px;
    }
    .social-icons {
      display:flex;
      gap:12px;
      margin-top:15px;
      justify-content:center;
    }
    footer a {
      color:#d7e4ff;
      text-decoration:none;
      text-align:center;
      display:inline-flex;
      justify-content:center;
      align-items:center;
    }
    .foot-note {
      border-top:1px solid rgba(255,255,255,.12);
      text-align:center;
      padding:14px;
      font-size:.9rem;
      color:#c8d4f7;
    }

    /* Responsive */
@media (max-width:980px){
  footer .wrap{
    grid-template-columns:1fr;
    padding:32px 8px;
  }
  footer .wrap > div {
    margin-bottom:18px;
    padding:0 8px;
  }
}
    @media (max-width:1100px){ 
      .cols-4{grid-template-columns:repeat(3,1fr)} 
    }
    @media (max-width:900px){ 
      .cols-4,.cols-3{grid-template-columns:repeat(2,1fr)} 
      .hero{min-height:48vh}
      .card { padding: 20px; }
      .avatar-wrapper { width: 85px; height: 85px; }
      .avatar, .avatar-fallback { 
        width: 85px; 
        height: 85px; 
        min-width: 85px;
        min-height: 85px;
        max-width: 85px;
        max-height: 85px;
      }
      .avatar-fallback { font-size: 1.7rem; }
    }
    @media (max-width:640px){
      .links{display:none} 
      .menu-btn{display:block}
      .links.open{display:flex; width:100%; flex-direction:column; padding:8px; gap:6px; margin-top:8px}
      .cols-4,.cols-3,.cols-2{grid-template-columns:1fr}
      .hero{min-height:42vh}
      .card { padding: 18px; }
      .avatar-wrapper { width: 80px; height: 80px; }
      .avatar, .avatar-fallback { 
        width: 80px; 
        height: 80px; 
        min-width: 80px;
        min-height: 80px;
        max-width: 80px;
        max-height: 80px;
      }
      .avatar-fallback { font-size: 1.5rem; }
      .card-details h3 { font-size: 1.05rem; }
      .section-head { flex-direction: column; align-items: flex-start; }
    }
  </style>
</head>
<body>

  <!-- Pill NAV -->
  <div class="nav-wrap" role="banner">
    <div class="nav glass" role="navigation" aria-label="Primary">
      <a class="brand" href="index.html#home" aria-label="Home">
        <img src="assets/logo.png" alt="Church Logo" />
        <span>ETMC-Ubungo</span>
      </a>

      <button class="menu-btn" aria-expanded="false" aria-controls="nav-links" title="Toggle navigation">☰</button>

      <nav id="nav-links" class="links">
        <a href="index.html#home">Home</a>
        <a href="index.html#beliefs">What We Believe</a>
        <a href="about.html">About</a>
        <a href="board.html" aria-current="page">Church Board</a>
        <a href="publications.html">Publications</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="hero-bg" aria-hidden="true"></div>
    <div class="hero-inner">
      <div class="glass" style="padding:16px 16px;">
        <div class="hero-title">
          <div>
            <h1>Church Board</h1>
            <div class="muted">Pastor · Deacons · Trustees · Missionaries</div>
          </div>
          <div class="chips" id="counts">
            <!-- counts auto-inserted -->
          </div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- Toolbar -->
    <div class="toolbar">
      <div class="filters" role="tablist" aria-label="Filter teams">
        <button class="pill" data-filter="all" aria-pressed="true"><i class="bi bi-grid-3x3-gap"></i> All</button>
        <button class="pill" data-filter="pastor"><i class="bi bi-person-badge"></i> Pastor</button>
        <button class="pill" data-filter="deacon"><i class="bi bi-people"></i> Deacons</button>
        <button class="pill" data-filter="trustee"><i class="bi bi-shield-check"></i> Trustees</button>
        <button class="pill" data-filter="missionary"><i class="bi bi-geo-alt"></i> Missionaries</button>
      </div>
      <div class="searchbox glass-soft">
        <i class="bi bi-search"></i>
        <input id="q" type="search" placeholder="Search name or area…" aria-label="Search team members">
        <select id="sort">
          <option value="role">Sort by Role</option>
          <option value="name">Sort by Name</option>
          <option value="area">Sort by Area</option>
        </select>
      </div>
    </div>

    <!-- Sections -->
    <section id="sec-pastor">
      <div class="section-head">
        <h2>Pastor</h2>
        <div class="hint muted">Spiritual oversight & teaching</div>
      </div>
      <div class="grid cols-3" id="pastor-grid"></div>
    </section>

    <section id="sec-deacons">
      <div class="section-head">
        <h2>Deacons</h2>
        <div class="hint muted">Service, order, and member care</div>
      </div>
      <div class="grid cols-4" id="deacon-grid"></div>
    </section>

    <section id="sec-trustees">
      <div class="section-head">
        <h2>Trustees</h2>
        <div class="hint muted">Stewardship & facilities</div>
      </div>
      <div class="grid cols-4" id="trustee-grid"></div>
    </section>

    <section id="sec-missionaries">
      <div class="section-head">
        <h2>Missionaries</h2>
        <div class="hint muted">Outreach & church planting</div>
      </div>
      <div class="grid cols-3" id="missionary-grid"></div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer role="contentinfo" class="glass-soft">
    <div class="wrap">
      <div>
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:15px">
          <img src="assets/logo.png" alt="Church logo" width="36" height="36" />
          <strong>ETMC - Ubungo</strong>
        </div>
        <p style="margin:0 0 15px; color:#c8d4f7; line-height:1.5; max-width:260px">
          A Bible-believing fellowship in Ubungo proclaiming the Gospel of Jesus Christ.
        </p>
        <div style="display:flex; gap:12px; margin-top:8px">
          <a href="https://www.instagram.com/ubungoendtime" target="_blank" rel="noopener" aria-label="Instagram" style="color:#d7e4ff; font-size:1.2rem"><i class="bi bi-instagram"></i></a>
          <a href="https://www.youtube.com/channel/UC-VyNWrLxPGvkyG8XFtlyyw" target="_blank" rel="noopener" aria-label="YouTube" style="color:#d7e4ff; font-size:1.2rem"><i class="bi bi-youtube"></i></a>
          <a href="https://wa.me/255742398600" target="_blank" rel="noopener" aria-label="WhatsApp" style="color:#d7e4ff; font-size:1.2rem"><i class="bi bi-whatsapp"></i></a>
        </div>
      </div>
      <div>
        <strong>Quick Links</strong><br/>
        <a href="index.html#beliefs">What We Believe</a><br/>
        <a href="about.html">About Us</a><br/>
        <a href="prayer-request.html">Prayer Request</a><br/>
        <a href="publications.html">Publications</a>
      </div>
      <div>
        <strong>Contact</strong><br/>
        <a href="mailto:info@etmc.org">info@etmc.org</a><br/>
        <a href="tel:+255742398600">+255 742 398 600</a><br/>
        <a href="https://maps.app.goo.gl/AmmTMawztCnETcYY9" target="_blank" rel="noopener">Ubungo, Dar es Salaam</a>
      </div>
    </div>
    <div class="foot-note">© <span id="year"></span> ETMC - Ubungo. All rights reserved.</div>
  </footer>

  <script>
    // Mobile nav toggle
    const btn = document.querySelector('.menu-btn');
    const links = document.querySelector('.links');
    btn?.addEventListener('click', () => {
      const open = links.classList.toggle('open');
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
    document.getElementById('year').textContent = new Date().getFullYear();

    // ------- DATA (edit here) -------
    const TEAM = [
      // Pastor (single)
      { name:"Pr. Daniel M.", role:"pastor", area:"Ubungo", photo:"assets/board/pastor.jpg" },

      // Deacons (11 total, including Head & Secretary)
      { name:"Br. William Mbenyange", role:"deacon-head", area:"", note:"", photo:"assets/board/deacon-head.jpg" },
      { name:"Br. Simion Mgode", role:"deacon-secretary", area:"Students", note:"", photo:"assets/board/secretary.jpg" },
      { name:"Br. Aloyce Mwakyeja", role:"deacon", area:"Goba" },
      { name:"Br. Angelous Kasongwa", role:"deacon", area:"G/Mboto" },
      { name:"Br. Ahazi Mwasandube", role:"deacon", area:"Mbezi" },
      { name:"Br. Jonas Sango", role:"deacon", area:"Tabata" },
      { name:"Br. Joshua Laiton", role:"deacon", area:"Kigamboni" },
      { name:"Br. Lusajo", role:"deacon", area:"Kitonga" },
      { name:"Br. Magesa Mihayo", role:"deacon", area:"Kawe" },
      { name:"Br. Martin Mikongosho", role:"deacon", area:"Mbagala" },
      { name:"Br. Raphael Mallya", role:"deacon", area:"Manzese" },
      // Trustees (4)
      { name:"Br. Samuel Tille", role:"trustee", area:"", photo:"assets/board/trustee1.jpg" },
      { name:"Br. Magesa Mihayo", role:"trustee", area:"" },
      { name:"Br. David Nganila", role:"trustee", area:"" },
      { name:"Br. Kennedy Mwaitete", role:"trustee", area:"" },

      // Missionaries (2)
      { name:"Br. William Mwangalaba", role:"missionary", area:"", photo:"assets/board/missionary1.jpg" },
      { name:"Br. Fredy Mwantingo", role:"missionary", area:"" }
    ];

    // ------- Helpers -------
    const roleTitles = {
      "pastor":"Pastor",
      "deacon":"Deacon",
      "deacon-head":"Head Deacon",
      "deacon-secretary":"Pastor’s Secretary",
      "trustee":"Trustee",
      "missionary":"Missionary"
    };
    const roleOrder = {"pastor":0,"deacon-head":1,"deacon-secretary":2,"deacon":3,"trustee":4,"missionary":5};

    function initials(name){
      return name.split(/\s+/).map(w=>w[0]).slice(0,2).join('').toUpperCase();
    }

    function getRoleIcon(role) {
      const icons = {
        "pastor": "bi-person-badge",
        "deacon-head": "bi-star-fill",
        "deacon-secretary": "bi-file-earmark-text",
        "deacon": "bi-people",
        "trustee": "bi-shield-check",
        "missionary": "bi-geo-alt"
      };
      return icons[role] || "bi-person";
    }

    function getRoleClass(role) {
      if (!role) return "";
      return role.replace(/-/g, "-");
    }

    function cardHTML(p){
      if (!p.role) return ""; // Skip entries without roles
      
      const memberInitials = initials(p.name);
      const avatarId = `avatar-${p.name.replace(/\s+/g, '-').toLowerCase()}`;
      
      const avatar = p.photo
        ? `<img class="avatar" id="${avatarId}" src="${p.photo}" alt="${p.name} photo" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='grid';">
           <div class="avatar-fallback" style="display:none;">${memberInitials}</div>`
        : `<div class="avatar-fallback">${memberInitials}</div>`;
      
      const roleTitle = roleTitles[p.role] || "";
      const roleIcon = getRoleIcon(p.role);
      const roleClass = getRoleClass(p.role);
      
      // Only show role badge for deacon-head and deacon-secretary
      const showRoleBadge = p.role === "deacon-head" || p.role === "deacon-secretary";
      
      // Don't show area for pastor and deacon-secretary
      const showArea = p.area && p.role !== "pastor" && p.role !== "deacon-secretary";
      
      return `
        <article class="card glass-soft">
          <div class="card-inner">
            <div class="avatar-wrapper">
              ${avatar}
            </div>
            <div class="card-details">
              <h3>${p.name}</h3>
              ${showRoleBadge ? `<span class="role-badge ${roleClass}">
                <i class="bi ${roleIcon}"></i>
                ${roleTitle}
              </span>` : ''}
              ${showArea ? `<span class="area"><i class="bi bi-geo-alt"></i> ${p.area}</span>` : ''}
              ${p.note ? `<div class="card-note"><i class="bi bi-info-circle"></i> ${p.note}</div>` : ''}
            </div>
          </div>
        </article>
      `;
    }

    function byRole(r){ return TEAM.filter(x=>x.role===r); }
    function byRoles(rs){ return TEAM.filter(x=>rs.includes(x.role)); }

    // ------- Render counts -------
    function renderCounts(){
      const countsEl = document.getElementById('counts');
      const cPastor = byRole("pastor").length;
      const cDeacons = byRoles(["deacon","deacon-head","deacon-secretary"]).length; // should be 11
      const cTrustees = byRole("trustee").length;
      const cMission = byRole("missionary").length;
      countsEl.innerHTML = `
        <span class="chip"><i class="bi bi-person-badge"></i> Pastor: ${cPastor}</span>
        <span class="chip"><i class="bi bi-people"></i> Deacons: ${cDeacons}</span>
        <span class="chip"><i class="bi bi-shield-check"></i> Trustees: ${cTrustees}</span>
        <span class="chip"><i class="bi bi-geo-alt"></i> Missionaries: ${cMission}</span>
      `;
    }

    // ------- Render sections -------
    const gPastor = document.getElementById('pastor-grid');
    const gDeacon = document.getElementById('deacon-grid');
    const gTrustee = document.getElementById('trustee-grid');
    const gMission = document.getElementById('missionary-grid');

    function sortData(arr, key){
      if(key==="name") return arr.slice().sort((a,b)=>a.name.localeCompare(b.name));
      if(key==="area") return arr.slice().sort((a,b)=>(a.area||"").localeCompare(b.area||""));
      // role
      return arr.slice().sort((a,b)=>roleOrder[a.role]-roleOrder[b.role] || a.name.localeCompare(b.name));
    }

    function matchesQuery(p, q){
      if(!q) return true;
      q = q.toLowerCase();
      return (p.name.toLowerCase().includes(q) || (p.area||"").toLowerCase().includes(q) || (roleTitles[p.role]||"").toLowerCase().includes(q));
    }

    function render(filter="all"){
      const q = document.getElementById('q').value.trim();
      const sortKey = document.getElementById('sort').value;

      const pastor = sortData(byRole("pastor").filter(p=>matchesQuery(p,q)), sortKey);
      const deacons = sortData(byRoles(["deacon-head","deacon-secretary","deacon"]).filter(p=>matchesQuery(p,q)), sortKey);
      const trustees = sortData(byRole("trustee").filter(p=>matchesQuery(p,q)), sortKey);
      const missionaries = sortData(byRole("missionary").filter(p=>matchesQuery(p,q)), sortKey);

      // visibility by filter
      document.getElementById('sec-pastor').style.display = (filter==="all"||filter==="pastor") ? "" : "none";
      document.getElementById('sec-deacons').style.display = (filter==="all"||filter==="deacon") ? "" : "none";
      document.getElementById('sec-trustees').style.display = (filter==="all"||filter==="trustee") ? "" : "none";
      document.getElementById('sec-missionaries').style.display = (filter==="all"||filter==="missionary") ? "" : "none";

      gPastor.innerHTML = pastor.map(cardHTML).join('');
      gDeacon.innerHTML = deacons.map(cardHTML).join('');
      gTrustee.innerHTML = trustees.map(cardHTML).join('');
      gMission.innerHTML = missionaries.map(cardHTML).join('');
    }

    renderCounts();
    render();

    // ------- Toolbar interactivity -------
    // Filter pills
    const pills = [...document.querySelectorAll('.pill')];
    pills.forEach(p=>{
      p.addEventListener('click',()=>{
        pills.forEach(x=>x.setAttribute('aria-pressed','false'));
        p.setAttribute('aria-pressed','true');
        render(p.dataset.filter);
      });
    });

    // Search & sort
    document.getElementById('q').addEventListener('input', ()=>render(document.querySelector('.pill[aria-pressed="true"]').dataset.filter));
    document.getElementById('sort').addEventListener('change', ()=>render(document.querySelector('.pill[aria-pressed="true"]').dataset.filter));
  </script>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"ETMC - Ubungo",
    "url":"https://etmc.org/board",
    "logo":"https://etmc.org/assets/logo.png",
    "department":[
      {"@type":"Organization","name":"Pastorate","employee":[{"@type":"Person","jobTitle":"Pastor"}]},
      {"@type":"Organization","name":"Deacons","employee":[{"@type":"Person","jobTitle":"Head Deacon"},{"@type":"Person","jobTitle":"Deacon"},{"@type":"Person","jobTitle":"Pastor’s Secretary"}]},
      {"@type":"Organization","name":"Trustees","employee":[{"@type":"Person","jobTitle":"Trustee"}]},
      {"@type":"Organization","name":"Missionaries","employee":[{"@type":"Person","jobTitle":"Missionary"}]}
    ]
  }
  </script>
</body>
</html>
